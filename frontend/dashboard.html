<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AI Study Planner</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-brand">ğŸ“š AI Study Planner</div>
            <div class="nav-links">
                <a href="dashboard.html" class="active">Dashboard</a>
                <a href="subjects.html">Subjects</a>
                <a href="planner.html">Planner</a>
                <a href="tests.html">Tests</a>
                <a href="revisions.html">Revisions</a>
                <a href="doubts.html">Doubts</a>
                <a href="#" onclick="logout()" style="color: #ef4444;">Logout</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1 class="mb-2">Welcome, <span id="user-name">Student</span>! ğŸ‘‹</h1>
        <div class="academic-badge mb-3" id="user-academic-level"
            style="display:inline-block; background: #6366f1; color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.875rem; font-weight: 600;">
            Class 10
        </div>
        <button onclick="changeAcademicLevel()"
            style="background:none; border:none; color:#6366f1; text-decoration:underline; cursor:pointer; font-size:0.875rem; margin-left:10px;">Change
            Class</button>

        <!-- Stats Cards -->
        <div class="grid grid-4 mb-3">
            <div class="stat-card">
                <div class="stat-value" id="total-hours">0</div>
                <div class="stat-label">Total Study Hours</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #10b981, #059669);">
                <div class="stat-value" id="completion-percentage">0%</div>
                <div class="stat-label">Today's Progress</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                <div class="stat-value" id="avg-test-score">0%</div>
                <div class="stat-label">Avg Test Score</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                <div class="stat-value" id="pending-revisions">0</div>
                <div class="stat-label">Pending Revisions</div>
            </div>
        </div>

        <div class="grid grid-2">
            <!-- Today's Tasks -->
            <div class="card">
                <div class="card-header">
                    ğŸ“ Today's Tasks
                    <a href="planner.html" class="btn btn-sm btn-primary">View All</a>
                </div>
                <div id="today-tasks-container">
                    <div class="spinner"></div>
                </div>
            </div>

            <!-- Upcoming Tasks -->
            <div class="card">
                <div class="card-header">ğŸ“… Upcoming Tasks</div>
                <div id="upcoming-tasks-container">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Subject-wise Study Hours -->
        <div class="card mt-2">
            <div class="card-header">ğŸ“Š Subject-wise Study Hours (Last 30 Days)</div>
            <div id="subject-stats-container">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- Test Performance -->
        <div class="card mt-2">
            <div class="card-header">ğŸ¯ Recent Test Performance</div>
            <div id="test-performance-container">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- Pending Revisions -->
        <div class="card mt-2">
            <div class="card-header">
                ğŸ”„ Pending Revisions
                <a href="revisions.html" class="btn btn-sm btn-primary">View All</a>
            </div>
            <div id="pending-revisions-container">
                <div class="spinner"></div>
            </div>
        </div>
    </div>

    <!-- Debug Console -->
    <div id="debug-console"
        style="position: fixed; bottom: 0; left: 0; right: 0; height: 180px; background: #000; color: #00ff00; font-family: 'Courier New', monospace; padding: 15px; overflow-y: auto; z-index: 9999; border-top: 3px solid #00ff00; font-size: 13px; box-shadow: 0 -5px 15px rgba(0,255,0,0.2);">
        <div
            style="color: #00ff00; border-bottom: 1px solid #004400; padding-bottom: 5px; margin-bottom: 10px; font-weight: bold;">
            ğŸŸ¢ SYSTEM DIAGNOSTIC LOGS - AI STUDY PLANNER v1.0
        </div>
        <div id="log-entries"></div>
    </div>

    <script>
        function log(msg, type = 'info') {
            const entries = document.getElementById('log-entries');
            if (!entries) return;
            const el = document.createElement('div');
            el.style.color = '#00ff00';
            el.style.marginBottom = '4px';
            el.style.textShadow = '0 0 5px rgba(0,255,0,0.5)';
            el.textContent = `> ${new Date().toLocaleTimeString()} - ${msg}`;
            entries.prepend(el);
            console.log(msg);
        }
        window.onerror = function (msg, url, line) {
            log(`CRITICAL ERROR: ${msg} at ${url}:${line}`, 'error');
        };
        log('Page Loaded. Waiting for environment scripts...');
    </script>

    <script src="js/auth.js?v=2"></script>
    <script src="js/dashboard.js"></script>
</body>

</html>